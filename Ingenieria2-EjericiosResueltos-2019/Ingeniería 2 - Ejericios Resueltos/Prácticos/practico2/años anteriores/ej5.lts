const SIZE = 10
range S = 0..SIZE

PRODUCER = (produce -> PRODUCER).
CONSUMER = (consume -> CONSUMER).

BUFFER = BUFFER[0],
BUFFER[i:S] = (when(i < SIZE) produce -> BUFFER[i + 1]
              |when(i > 0) consume -> BUFFER[i - 1]).

||PROTOCOL = (PRODUCER || CONSUMER || BUFFER).