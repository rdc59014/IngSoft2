const K = 10
const N = 20
const M = 15

READER = (read -> READER).
WRITER = (read_write -> WRITER).
BOOK = BOOK[0],
BOOK[i:0..N+M] = (when(i < K) read -> BOOK[i + 1]
                 |when(i < K) read_write -> BOOK[i + 1]
                 |when(i > 0) release -> BOOK[i - 1]).

||LIBRARY = (READER || WRITER || BOOK).